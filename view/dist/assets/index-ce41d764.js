(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function T(){}const me=e=>e;function Ce(e){return e()}function ye(){return Object.create(null)}function H(e){e.forEach(Ce)}function se(e){return typeof e=="function"}function R(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ae;function Ze(e,t){return ae||(ae=document.createElement("a")),ae.href=t,e===ae.href}function Qe(e){return Object.keys(e).length===0}const He=typeof window<"u";let Oe=He?()=>window.performance.now():()=>Date.now(),_e=He?e=>requestAnimationFrame(e):T;const W=new Set;function Pe(e){W.forEach(t=>{t.c(e)||(W.delete(t),t.f())}),W.size!==0&&_e(Pe)}function je(e){let t;return W.size===0&&_e(Pe),{promise:new Promise(n=>{W.add(t={c:e,f:n})}),abort(){W.delete(t)}}}function g(e,t){e.appendChild(t)}function Ke(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Xe(e){const t=b("style");return et(Ke(e),t),t.sheet}function et(e,t){return g(e.head||e,t),t.sheet}function I(e,t,n){e.insertBefore(t,n||null)}function N(e){e.parentNode&&e.parentNode.removeChild(e)}function tt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function b(e){return document.createElement(e)}function F(e){return document.createTextNode(e)}function E(){return F(" ")}function nt(){return F("")}function L(e,t,n,a){return e.addEventListener(t,n,a),()=>e.removeEventListener(t,n,a)}function p(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function at(e){return Array.from(e.childNodes)}function Y(e,t){t=""+t,e.data!==t&&(e.data=t)}function $e(e,t){e.value=t??""}function ke(e,t,n){for(let a=0;a<e.options.length;a+=1){const i=e.options[a];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function it(e){const t=e.querySelector(":checked");return t&&t.__value}function ze(e,t,{bubbles:n=!1,cancelable:a=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,a,t),i}const oe=new Map;let re=0;function ot(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function rt(e,t){const n={stylesheet:Xe(t),rules:{}};return oe.set(e,n),n}function de(e,t,n,a,i,o,r,s=0){const l=16.666/a;let c=`{
`;for(let d=0;d<=1;d+=l){const h=t+(n-t)*o(d);c+=d*100+`%{${r(h,1-h)}}
`}const f=c+`100% {${r(n,1-n)}}
}`,v=`__svelte_${ot(f)}_${s}`,w=Ke(e),{stylesheet:u,rules:_}=oe.get(w)||rt(w,e);_[v]||(_[v]=!0,u.insertRule(`@keyframes ${v} ${f}`,u.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${v} ${a}ms linear ${i}ms 1 both`,re+=1,v}function he(e,t){const n=(e.style.animation||"").split(", "),a=n.filter(t?o=>o.indexOf(t)<0:o=>o.indexOf("__svelte")===-1),i=n.length-a.length;i&&(e.style.animation=a.join(", "),re-=i,re||st())}function st(){_e(()=>{re||(oe.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&N(t)}),oe.clear())})}let ee;function Q(e){ee=e}function Fe(){if(!ee)throw new Error("Function called outside component initialization");return ee}function lt(e){Fe().$$.on_mount.push(e)}function Be(){const e=Fe();return(t,n,{cancelable:a=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=ze(t,n,{cancelable:a});return i.slice().forEach(r=>{r.call(e,o)}),!o.defaultPrevented}return!0}}function Re(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(a=>a.call(this,t))}const G=[],J=[];let V=[];const ge=[],ct=Promise.resolve();let pe=!1;function ut(){pe||(pe=!0,ct.then(De))}function j(e){V.push(e)}function le(e){ge.push(e)}const ce=new Set;let q=0;function De(){if(q!==0)return;const e=ee;do{try{for(;q<G.length;){const t=G[q];q++,Q(t),ft(t.$$)}}catch(t){throw G.length=0,q=0,t}for(Q(null),G.length=0,q=0;J.length;)J.pop()();for(let t=0;t<V.length;t+=1){const n=V[t];ce.has(n)||(ce.add(n),n())}V.length=0}while(G.length);for(;ge.length;)ge.pop()();pe=!1,ce.clear(),Q(e)}function ft(e){if(e.fragment!==null){e.update(),H(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(j)}}function dt(e){const t=[],n=[];V.forEach(a=>e.indexOf(a)===-1?t.push(a):n.push(a)),n.forEach(a=>a()),V=t}let Z;function Ue(){return Z||(Z=Promise.resolve(),Z.then(()=>{Z=null})),Z}function X(e,t,n){e.dispatchEvent(ze(`${t?"intro":"outro"}${n}`))}const ie=new Set;let P;function qe(){P={r:0,c:[],p:P}}function Ge(){P.r||H(P.c),P=P.p}function S(e,t){e&&e.i&&(ie.delete(e),e.i(t))}function C(e,t,n,a){if(e&&e.o){if(ie.has(e))return;ie.add(e),P.c.push(()=>{ie.delete(e),a&&(n&&e.d(1),a())}),e.o(t)}else a&&a()}const We={duration:0};function Je(e,t,n){const a={direction:"in"};let i=t(e,n,a),o=!1,r,s,l=0;function c(){r&&he(e,r)}function f(){const{delay:w=0,duration:u=300,easing:_=me,tick:m=T,css:d}=i||We;d&&(r=de(e,0,1,u,w,_,d,l++)),m(0,1);const h=Oe()+w,x=h+u;s&&s.abort(),o=!0,j(()=>X(e,!0,"start")),s=je(y=>{if(o){if(y>=x)return m(1,0),X(e,!0,"end"),c(),o=!1;if(y>=h){const k=_((y-h)/u);m(k,1-k)}}return o})}let v=!1;return{start(){v||(v=!0,he(e),se(i)?(i=i(a),Ue().then(f)):f())},invalidate(){v=!1},end(){o&&(c(),o=!1)}}}function xe(e,t,n,a){const i={direction:"both"};let o=t(e,n,i),r=a?0:1,s=null,l=null,c=null;function f(){c&&he(e,c)}function v(u,_){const m=u.b-r;return _*=Math.abs(m),{a:r,b:u.b,d:m,duration:_,start:u.start,end:u.start+_,group:u.group}}function w(u){const{delay:_=0,duration:m=300,easing:d=me,tick:h=T,css:x}=o||We,y={start:Oe()+_,b:u};u||(y.group=P,P.r+=1),s||l?l=y:(x&&(f(),c=de(e,r,u,m,_,d,x)),u&&h(0,1),s=v(y,m),j(()=>X(e,u,"start")),je(k=>{if(l&&k>l.start&&(s=v(l,m),l=null,X(e,s.b,"start"),x&&(f(),c=de(e,r,s.b,s.duration,0,d,o.css))),s){if(k>=s.end)h(r=s.b,1-r),X(e,s.b,"end"),l||(s.b?f():--s.group.r||H(s.group.c)),s=null;else if(k>=s.start){const A=k-s.start;r=s.a+s.d*d(A/s.duration),h(r,1-r)}}return!!(s||l)}))}return{run(u){se(o)?Ue().then(()=>{o=o(i),w(u)}):w(u)},end(){f(),s=l=null}}}function ue(e,t,n){const a=e.$$.props[t];a!==void 0&&(e.$$.bound[a]=n,n(e.$$.ctx[a]))}function B(e){e&&e.c()}function K(e,t,n,a){const{fragment:i,after_update:o}=e.$$;i&&i.m(t,n),a||j(()=>{const r=e.$$.on_mount.map(Ce).filter(se);e.$$.on_destroy?e.$$.on_destroy.push(...r):H(r),e.$$.on_mount=[]}),o.forEach(j)}function z(e,t){const n=e.$$;n.fragment!==null&&(dt(n.after_update),H(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ht(e,t){e.$$.dirty[0]===-1&&(G.push(e),ut(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function D(e,t,n,a,i,o,r,s=[-1]){const l=ee;Q(e);const c=e.$$={fragment:null,ctx:[],props:o,update:T,not_equal:i,bound:ye(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:ye(),dirty:s,skip_bound:!1,root:t.target||l.$$.root};r&&r(c.root);let f=!1;if(c.ctx=n?n(e,t.props||{},(v,w,...u)=>{const _=u.length?u[0]:w;return c.ctx&&i(c.ctx[v],c.ctx[v]=_)&&(!c.skip_bound&&c.bound[v]&&c.bound[v](_),f&&ht(e,v)),w}):[],c.update(),f=!0,H(c.before_update),c.fragment=a?a(c.ctx):!1,t.target){if(t.hydrate){const v=at(t.target);c.fragment&&c.fragment.l(v),v.forEach(N)}else c.fragment&&c.fragment.c();t.intro&&S(e.$$.fragment),K(e,t.target,t.anchor,t.customElement),De()}Q(l)}class U{$destroy(){z(this,1),this.$destroy=T}$on(t,n){if(!se(n))return T;const a=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return a.push(n),()=>{const i=a.indexOf(n);i!==-1&&a.splice(i,1)}}$set(t){this.$$set&&!Qe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function gt(e){let t,n,a,i,o,r,s,l,c,f,v,w,u,_,m,d,h,x,y,k,A,M;return{c(){t=b("div"),n=b("div"),a=b("div"),i=b("button"),i.textContent="Fix grammar",o=E(),r=b("div"),s=b("button"),s.textContent="Elaborate",l=E(),c=b("div"),f=b("button"),f.textContent="Rewrite",v=E(),w=b("div"),u=b("button"),u.textContent="Summarize",_=E(),m=b("div"),d=b("div"),h=b("span"),x=F(e[0]),y=E(),k=b("button"),k.textContent="Translate to",p(i,"class","btn btn-accent w-32"),p(a,"class","text-primary-content grid place-content-center rounded"),p(s,"class","btn btn-accent w-32"),p(r,"class","text-accent-content grid place-content-center rounded"),p(f,"class","btn btn-accent w-32"),p(c,"class","text-secondary-content grid place-content-center rounded"),p(u,"class","btn btn-accent w-32"),p(w,"class","text-secondary-content grid place-content-center rounded"),p(h,"class","indicator-item indicator-top indicator-right badge badge-secondary"),p(k,"class","btn btn-accent w-32"),p(d,"class","indicator"),p(m,"class","text-secondary-content grid col-span-2 place-content-center rounded"),p(n,"class","grid grid-cols-2 gap-4 gap-y-8"),p(t,"class","flex justify-center")},m($,O){I($,t,O),g(t,n),g(n,a),g(a,i),g(n,o),g(n,r),g(r,s),g(n,l),g(n,c),g(c,f),g(n,v),g(n,w),g(w,u),g(n,_),g(n,m),g(m,d),g(d,h),g(h,x),g(d,y),g(d,k),A||(M=[L(i,"click",e[2]),L(s,"click",e[3]),L(f,"click",e[4]),L(u,"click",e[5]),L(k,"click",e[6])],A=!0)},p($,[O]){O&1&&Y(x,$[0])},i:T,o:T,d($){$&&N(t),A=!1,H(M)}}}function pt(e,t,n){const a=Be();let{language:i="EN"}=t;const o=()=>a("grammar"),r=()=>a("elaborate"),s=()=>a("rewrite"),l=()=>a("summarize"),c=()=>a("translate");return e.$$set=f=>{"language"in f&&n(0,i=f.language)},[i,a,o,r,s,l,c]}class mt extends U{constructor(t){super(),D(this,t,pt,gt,R,{language:0})}}const _t=""+new URL("mini-natto-56922c88.png",import.meta.url).href;function Me(e){let t;return{c(){t=b("span"),p(t,"class","loading loading-spinner loading-sm")},m(n,a){I(n,t,a)},d(n){n&&N(t)}}}function bt(e){let t,n,a,i,o,r,s,l,c,f,v,w=e[0]&&Me();return{c(){t=b("div"),n=b("div"),a=b("a"),a.textContent="Chrome Natto",i=E(),w&&w.c(),o=E(),r=b("div"),s=b("div"),l=b("div"),c=b("div"),f=b("img"),p(a,"class","btn btn-ghost text-xl"),p(n,"class","flex-1"),p(f,"alt","Logo"),Ze(f.src,v=_t)||p(f,"src",v),p(c,"class","w-10 rounded-full"),p(l,"tabindex","0"),p(l,"role","button"),p(l,"class","btn btn-ghost btn-circle avatar"),p(s,"class","dropdown dropdown-end"),p(r,"class","flex-none gap-2"),p(t,"class","navbar")},m(u,_){I(u,t,_),g(t,n),g(n,a),g(n,i),w&&w.m(n,null),g(t,o),g(t,r),g(r,s),g(s,l),g(l,c),g(c,f)},p(u,[_]){u[0]?w||(w=Me(),w.c(),w.m(n,null)):w&&(w.d(1),w=null)},i:T,o:T,d(u){u&&N(t),w&&w.d()}}}function vt(e,t,n){let{processing:a=!1}=t;return e.$$set=i=>{"processing"in i&&n(0,a=i.processing)},[a]}class wt extends U{constructor(t){super(),D(this,t,vt,bt,R,{processing:0})}}function yt(e){let t,n,a,i,o,r;return{c(){t=b("div"),n=b("button"),n.innerHTML='<i class="fa-solid fa-home"></i>',a=E(),i=b("button"),i.innerHTML='<i class="fa-solid fa-cog"></i>',p(n,"class","active"),p(i,"class","active"),p(t,"class","btm-nav h-min-0 h-12")},m(s,l){I(s,t,l),g(t,n),g(t,a),g(t,i),o||(r=[L(n,"click",e[2]),L(i,"click",e[3])],o=!0)},p:T,i:T,o:T,d(s){s&&N(t),o=!1,H(r)}}}function $t(e,t,n){const a=Be();let{language:i="EN"}=t;const o=()=>a("home"),r=()=>a("options");return e.$$set=s=>{"language"in s&&n(1,i=s.language)},[a,i,o,r]}class kt extends U{constructor(t){super(),D(this,t,$t,yt,R,{language:1})}}function Te(e,t,n){const a=e.slice();return a[5]=t[n],a}function Ee(e){let t,n=e[5]+"",a,i;return{c(){t=b("option"),a=F(n),t.__value=i=e[5],t.value=t.__value},m(o,r){I(o,t,r),g(t,a)},p(o,r){r&4&&n!==(n=o[5]+"")&&Y(a,n),r&4&&i!==(i=o[5])&&(t.__value=i,t.value=t.__value)},d(o){o&&N(t)}}}function xt(e){let t,n,a,i,o,r,s,l=(e[0]||"Pick one")+"",c,f,v,w,u=e[2],_=[];for(let m=0;m<u.length;m+=1)_[m]=Ee(Te(e,u,m));return{c(){t=b("label"),n=b("div"),a=b("span"),i=F(e[1]),o=E(),r=b("select"),s=b("option"),c=F(l);for(let m=0;m<_.length;m+=1)_[m].c();p(a,"class","label-text"),p(n,"class","label"),s.disabled=!0,s.selected=!0,s.__value=f=e[0]||"Pick one",s.value=s.__value,p(r,"class","select select-bordered"),e[0]===void 0&&j(()=>e[4].call(r)),p(t,"class","form-control w-full max-w-xs")},m(m,d){I(m,t,d),g(t,n),g(n,a),g(a,i),g(t,o),g(t,r),g(r,s),g(s,c);for(let h=0;h<_.length;h+=1)_[h]&&_[h].m(r,null);ke(r,e[0],!0),v||(w=[L(r,"change",e[4]),L(r,"change",e[3])],v=!0)},p(m,[d]){if(d&2&&Y(i,m[1]),d&1&&l!==(l=(m[0]||"Pick one")+"")&&Y(c,l),d&5&&f!==(f=m[0]||"Pick one")&&(s.__value=f,s.value=s.__value),d&4){u=m[2];let h;for(h=0;h<u.length;h+=1){const x=Te(m,u,h);_[h]?_[h].p(x,d):(_[h]=Ee(x),_[h].c(),_[h].m(r,null))}for(;h<_.length;h+=1)_[h].d(1);_.length=u.length}d&5&&ke(r,m[0])},i:T,o:T,d(m){m&&N(t),tt(_,m),v=!1,H(w)}}}function Mt(e,t,n){let{label:a=""}=t,{options:i=[]}=t,{selection:o=""}=t;function r(l){Re.call(this,e,l)}function s(){o=it(this),n(0,o),n(2,i)}return e.$$set=l=>{"label"in l&&n(1,a=l.label),"options"in l&&n(2,i=l.options),"selection"in l&&n(0,o=l.selection)},[o,a,i,r,s]}class Ne extends U{constructor(t){super(),D(this,t,Mt,xt,R,{label:1,options:2,selection:0})}}function Tt(e){let t,n,a,i,o,r,s,l;return{c(){t=b("label"),n=b("div"),a=b("span"),i=F(e[1]),o=E(),r=b("input"),p(a,"class","label-text"),p(n,"class","label"),p(r,"type","password"),p(r,"placeholder",e[0]),p(r,"class","input input-bordered"),p(t,"class","form-control w-full max-w-xs")},m(c,f){I(c,t,f),g(t,n),g(n,a),g(a,i),g(t,o),g(t,r),$e(r,e[0]),s||(l=[L(r,"input",e[3]),L(r,"change",e[2])],s=!0)},p(c,[f]){f&2&&Y(i,c[1]),f&1&&p(r,"placeholder",c[0]),f&1&&r.value!==c[0]&&$e(r,c[0])},i:T,o:T,d(c){c&&N(t),s=!1,H(l)}}}function Et(e,t,n){let{label:a=""}=t,{value:i=""}=t;function o(s){Re.call(this,e,s)}function r(){i=this.value,n(0,i)}return e.$$set=s=>{"label"in s&&n(1,a=s.label),"value"in s&&n(0,i=s.value)},[i,a,o,r]}class Nt extends U{constructor(t){super(),D(this,t,Et,Tt,R,{label:1,value:0})}}function St(e){const t=e-1;return t*t*t+1}function Se(e,{delay:t=0,duration:n=400,easing:a=me}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:a,css:o=>`opacity: ${o*i}`}}function Ve(e,{delay:t=0,duration:n=400,easing:a=St,axis:i="y"}={}){const o=getComputedStyle(e),r=+o.opacity,s=i==="y"?"height":"width",l=parseFloat(o[s]),c=i==="y"?["top","bottom"]:["left","right"],f=c.map(h=>`${h[0].toUpperCase()}${h.slice(1)}`),v=parseFloat(o[`padding${f[0]}`]),w=parseFloat(o[`padding${f[1]}`]),u=parseFloat(o[`margin${f[0]}`]),_=parseFloat(o[`margin${f[1]}`]),m=parseFloat(o[`border${f[0]}Width`]),d=parseFloat(o[`border${f[1]}Width`]);return{delay:t,duration:n,easing:a,css:h=>`overflow: hidden;opacity: ${Math.min(h*20,1)*r};${s}: ${h*l}px;padding-${c[0]}: ${h*v}px;padding-${c[1]}: ${h*w}px;margin-${c[0]}: ${h*u}px;margin-${c[1]}: ${h*_}px;border-${c[0]}-width: ${h*m}px;border-${c[1]}-width: ${h*d}px;`}}function Ie(e){let t,n,a,i,o,r,s;return{c(){t=b("div"),n=b("div"),a=b("span"),i=F(e[0]),p(n,"class",o="alert text-wrap "+(e[2]?"alert-info":"alert-error")),p(t,"class","toast toast-end")},m(l,c){I(l,t,c),g(t,n),g(n,a),g(a,i),s=!0},p(l,c){(!s||c&1)&&Y(i,l[0]),(!s||c&4&&o!==(o="alert text-wrap "+(l[2]?"alert-info":"alert-error")))&&p(n,"class",o)},i(l){s||(j(()=>{s&&(r||(r=xe(t,Se,{},!0)),r.run(1))}),s=!0)},o(l){r||(r=xe(t,Se,{},!1)),r.run(0),s=!1},d(l){l&&N(t),l&&r&&r.end()}}}function It(e){let t,n,a=e[1]&&Ie(e);return{c(){a&&a.c(),t=nt()},m(i,o){a&&a.m(i,o),I(i,t,o),n=!0},p(i,[o]){i[1]?a?(a.p(i,o),o&2&&S(a,1)):(a=Ie(i),a.c(),S(a,1),a.m(t.parentNode,t)):a&&(qe(),C(a,1,1,()=>{a=null}),Ge())},i(i){n||(S(a),n=!0)},o(i){C(a),n=!1},d(i){a&&a.d(i),i&&N(t)}}}const Ae=40;function At(e,t,n){let a="",i=!1,o=!0;function r(s,l){n(0,a=s.length>Ae?s.slice(0,Ae)+"...":s),n(1,i=!0),n(2,o=l),setTimeout(()=>{n(1,i=!1)},3e3)}return[a,i,o,r]}class Lt extends U{constructor(t){super(),D(this,t,At,It,R,{setMessage:3})}get setMessage(){return this.$$.ctx[3]}}function te(e={model:"gpt-4o-mini",temperature:0},t=[]){return n=>{const a={role:"user",content:n},i=[...t,a];return Ht(i,e).then(o=>{const r=Ct(o);return t.push(a),t.push(r.message),r})}}function ne(e){return e.message}function Ct(e){const{error:t,object:n,created:a,model:i,usage:o,system_fingerprint:r}=e;if(t)throw t.message;const s=e.choices[0];if(s.finish_reason==="stop")return{object:n,created:a,model:i,usage:o,system_fingerprint:r,message:s.message};throw new Error("No response from AI")}function Ht(e,t){let{apiKey:n,...a}=t;try{n||(n={}.OPENAI_API_KEY)}catch{}return fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({...a,messages:e})}).then(i=>i.json())}async function Ot(){const[e]=await chrome.tabs.query({active:!0,currentWindow:!0});return e}async function Pt(){return(await Ot()).id}async function Le(e){const t=await Pt();if(!t)return;let n=await chrome.webNavigation.getAllFrames({tabId:t}),a=[];return n==null||n.forEach(i=>{let o=chrome.tabs.sendMessage(t,e,{frameId:i.frameId});a.push(o)}),Promise.all(a)}function fe(e){return new Promise((t,n)=>{chrome.storage.local.get(e,async a=>{const i=a[e];t(i)})})}async function jt(e,t,n){return(await(await te({model:t,apiKey:e}))(`
        Fix the typos, punctuation and lettercase of this text. 
        Keep the same language, tone and style. 
        Do not add any text that is not there. 
        If the sentence is already correct, just leave it.
        If the sentence cannot be fixed, just leave it as it is.
        If no text is provided, just leave it as it is.
        Do not provide explanations or comments.
        Output the code as HTML, with corresponding tags for each element to maintain the original formatting,
        but do not add any additional formatting such as markdown, and do not write something like "Here the text" or do not use markings to indicate the HTML code is starting.

        Here the text:${n}`).then(ne)).content}async function Kt(e,t,n){return(await(await te({model:t,apiKey:e}))(`
        Elaborate on the following text with more details. Provide more background or information. 
        Expand on the ideas, but keep the length of the final text similar in length to the input of the text below.
        If a list of bullet points is provided, expand on each point in a paragraph.
        Keep the same language.
        If no text is provided, just leave it as it is.
        Output the code as HTML, with corresponding tags for each element to maintain the original formatting,
        but do not add any additional formatting such as markdown, and do not write something like "Here the text" or do not use markings to indicate the HTML code is starting.

        Here the text:${n}`).then(ne)).content}async function zt(e,t,n){return(await(await te({model:t,apiKey:e}))(`
        Paraphrase this text. Rewrite it with different words but keep the same length. 
        Keep the same language. If no text is provided, just leave it as it is.
        Output the code as HTML, with corresponding tags for each element to maintain the original formatting,
        but do not add any additional formatting such as markdown, and do not write something like "Here the text" or do not use markings to indicate the HTML code is starting.

        Here the text:${n}`).then(ne)).content}async function Ft(e,t,n){return(await(await te({model:t,apiKey:e}))(`
        Summarize the following text. Keep the same language.
        If no text is provided, just leave it as it is.
        Output the code as HTML, with corresponding tags for each element to maintain the original formatting,
        but do not add any additional formatting such as markdown, and do not write something like "Here the text" or do not use markings to indicate the HTML code is starting.

        Here the text:${n}`).then(ne)).content}async function Bt(e,t,n,a){return(await(await te({model:t,apiKey:e}))(`
      Translate the text in the ${a} language.
      Do not modify the text, its meaning or its tone.
      If no text is provided, just leave it as it is.
      Output the code as HTML, with corresponding tags for each element to maintain the original formatting,
      but do not add any additional formatting such as markdown, and do not write something like "Here the text" or do not use markings to indicate the HTML code is starting.

      Here the text:${n}`).then(ne)).content}const Rt=["Abkhaz","Afar","Afrikaans","Akan","Albanian","Amharic","Arabic","Aragonese","Armenian","Assamese","Avaric","Avestan","Aymara","Azerbaijani","Bambara","Bashkir","Basque","Belarusian","Bengali","Bihari","Bislama","Bosnian","Breton","Bulgarian","Burmese","Catalan","Chamorro","Chechen","Chichewa","Chinese","Chuvash","Cornish","Corsican","Cree","Croatian","Czech","Danish","Divehi","Dutch","Dzongkha","English","Esperanto","Estonian","Ewe","Faroese","Fijian","Finnish","French","Fulah","Galician","Georgian","German","Greek","Guarani","Gujarati","Haitian","Hausa","Hebrew","Herero","Hindi","Hiri Motu","Hungarian","Interlingua","Indonesian","Interlingue","Irish","Igbo","Inupiaq","Ido","Icelandic","Italian","Inuktitut","Japanese","Javanese","Kalaallisut","Kannada","Kanuri","Kashmiri","Kazakh","Khmer","Kikuyu","Kinyarwanda","Kirghiz","Komi","Kongo","Korean","Kurdish","Kwanyama","Latin","Luxembourgish","Ganda","Limburgish","Lingala","Lao","Lithuanian","Luba-Katanga","Latvian","Manx","Macedonian","Malagasy","Malay","Malayalam","Maltese","Maori","Marathi","Marshallese","Mongolian","Nauru","Navajo","Norwegian Bokmål","North Ndebele","Nepali","Ndonga","Norwegian Nynorsk","Norwegian","Nuosu","South Ndebele","Occitan","Ojibwa","Old Church Slavonic","Oromo","Oriya","Ossetian","Panjabi","Pāli","Persian","Polish","Pashto","Portuguese","Quechua","Romansh","Kirundi","Romanian","Russian","Sanskrit","Sardinian","Sindhi","Northern Sami","Samoan","Sango","Serbian","Gaelic","Shona","Sinhala","Slovak","Slovenian","Somali","Southern Sotho","Spanish","Sundanese","Swahili","Swati","Swedish","Tamil","Telugu","Tajik","Thai","Tigrinya","Tibetan","Turkmen","Tagalog","Tswana","Tonga","Turkish","Tsonga","Tatar","Twi","Tahitian","Uyghur","Ukrainian","Urdu","Uzbek","Venda","Vietnamese","Volapük","Walloon","Wolof","Xhosa","Yiddish","Yoruba","Zhuang","Zulu"];function Dt(e){let t,n,a,i,o,r,s,l,c,f,v,w,u,_,m,d;function h($){e[10]($)}let x={label:"Pick a language",options:Rt};e[1]!==void 0&&(x.selection=e[1]),i=new Ne({props:x}),J.push(()=>ue(i,"selection",h)),i.$on("change",e[8]);function y($){e[11]($)}let k={label:"Pick a model",options:["gpt-4o-mini","gpt-4o"]};e[2]!==void 0&&(k.selection=e[2]),l=new Ne({props:k}),J.push(()=>ue(l,"selection",y)),l.$on("change",e[7]);function A($){e[12]($)}let M={label:"Input your API key"};return e[3]!==void 0&&(M.value=e[3]),u=new Nt({props:M}),J.push(()=>ue(u,"value",A)),u.$on("change",e[9]),{c(){t=b("div"),n=b("div"),a=b("div"),B(i.$$.fragment),r=E(),s=b("div"),B(l.$$.fragment),f=E(),v=b("div"),v.textContent="Settings",w=E(),B(u.$$.fragment),p(a,"class","grid"),p(s,"class","grid mt-4"),p(v,"class","divider"),p(n,"class","w-64 h-96"),p(t,"class","flex justify-center")},m($,O){I($,t,O),g(t,n),g(n,a),K(i,a,null),g(n,r),g(n,s),K(l,s,null),g(n,f),g(n,v),g(n,w),K(u,n,null),d=!0},p($,O){e=$;const be={};!o&&O&2&&(o=!0,be.selection=e[1],le(()=>o=!1)),i.$set(be);const ve={};!c&&O&4&&(c=!0,ve.selection=e[2],le(()=>c=!1)),l.$set(ve);const we={};!_&&O&8&&(_=!0,we.value=e[3],le(()=>_=!1)),u.$set(we)},i($){d||(S(i.$$.fragment,$),S(l.$$.fragment,$),S(u.$$.fragment,$),m||j(()=>{m=Je(t,Ve,{axis:"x",duration:Ye}),m.start()}),d=!0)},o($){C(i.$$.fragment,$),C(l.$$.fragment,$),C(u.$$.fragment,$),d=!1},d($){$&&N(t),z(i),z(l),z(u)}}}function Ut(e){let t,n,a,i;return n=new mt({props:{language:e[1]}}),n.$on("grammar",e[6]("fix_grammar")),n.$on("elaborate",e[6]("elaborate")),n.$on("rewrite",e[6]("rewrite")),n.$on("summarize",e[6]("summarize")),n.$on("translate",e[6]("translate")),{c(){t=b("div"),B(n.$$.fragment),p(t,"class","flex items-center justify-center")},m(o,r){I(o,t,r),K(n,t,null),i=!0},p(o,r){e=o;const s={};r&2&&(s.language=e[1]),n.$set(s)},i(o){i||(S(n.$$.fragment,o),a||j(()=>{a=Je(t,Ve,{axis:"x",duration:Ye}),a.start()}),i=!0)},o(o){C(n.$$.fragment,o),i=!1},d(o){o&&N(t),z(n)}}}function qt(e){let t,n,a,i,o,r,s,l,c,f,v;a=new wt({props:{processing:e[5]}});const w=[Ut,Dt],u=[];function _(d,h){return d[0]?0:1}o=_(e),r=u[o]=w[o](e),l=new kt({}),l.$on("home",e[13]),l.$on("options",e[14]);let m={};return f=new Lt({props:m}),e[15](f),{c(){t=b("div"),n=b("div"),B(a.$$.fragment),i=E(),r.c(),s=E(),B(l.$$.fragment),c=E(),B(f.$$.fragment),p(n,"class","mb-6"),p(t,"class","bg-base-100 ml-4 mr-4 w-80 h-96")},m(d,h){I(d,t,h),g(t,n),K(a,n,null),g(t,i),u[o].m(t,null),g(t,s),K(l,t,null),I(d,c,h),K(f,d,h),v=!0},p(d,[h]){const x={};h&32&&(x.processing=d[5]),a.$set(x);let y=o;o=_(d),o===y?u[o].p(d,h):(qe(),C(u[y],1,1,()=>{u[y]=null}),Ge(),r=u[o],r?r.p(d,h):(r=u[o]=w[o](d),r.c()),S(r,1),r.m(t,s));const k={};f.$set(k)},i(d){v||(S(a.$$.fragment,d),S(r),S(l.$$.fragment,d),S(f.$$.fragment,d),v=!0)},o(d){C(a.$$.fragment,d),C(r),C(l.$$.fragment,d),C(f.$$.fragment,d),v=!1},d(d){d&&N(t),z(a),u[o].d(),z(l),d&&N(c),e[15](null),z(f,d)}}}const Ye=400;function Gt(e,t,n){let a=!0,i="English",o="gpt-4o-mini",r="sk-proj-TrU-RWW...",s,l=!1;lt(async()=>{n(3,r=await fe("natto_apikey")??r),n(2,o=await fe("natto_model")??o),n(1,i=await fe("natto_translation_language")??i),chrome.runtime.sendMessage({ready:!0})});function c(y){return async function(){let k=[];try{k=await Le({action:"get_selected_text"})}catch($){s.setMessage("Natto does not support this page. See console.",!1),console.error($),n(5,l=!1);return}const A=k.find(({text:$})=>$.length>0);if(!A||!A.text){s.setMessage("No text selected",!1);return}let{text:M}=A;n(5,l=!0);try{if(y=="fix_grammar")M=await jt(r,o,M);else if(y=="elaborate")M=await Kt(r,o,M);else if(y=="rewrite")M=await zt(r,o,M);else if(y=="summarize")M=await Ft(r,o,M);else if(y=="translate")M=await Bt(r,o,M,i);else throw new Error("Unable to perform this action")}catch($){s.setMessage($.substring(0,40)+"...",!1),n(5,l=!1);return}await Le({action:"replace_selected_text",text:M}),s.setMessage("Done",!0),n(5,l=!1)}}async function f(y){await chrome.storage.local.set({natto_model:o}),s.setMessage(`Updated model: ${o}`,!0)}async function v(y){await chrome.storage.local.set({natto_translation_language:i}),s.setMessage(`Updated language: ${i}`,!0)}async function w(y){await chrome.storage.local.set({natto_apikey:r}),s.setMessage(`Updated key: ${r.substring(0,7)}...`,!0)}function u(y){i=y,n(1,i)}function _(y){o=y,n(2,o)}function m(y){r=y,n(3,r)}const d=()=>n(0,a=!0),h=()=>n(0,a=!1);function x(y){J[y?"unshift":"push"](()=>{s=y,n(4,s)})}return[a,i,o,r,s,l,c,f,v,w,u,_,m,d,h,x]}class Wt extends U{constructor(t){super(),D(this,t,Gt,qt,R,{})}}new Wt({target:document.getElementById("app")});
