(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}})();function M(){}const me=e=>e;function Pe(e){return e()}function ye(){return Object.create(null)}function j(e){e.forEach(Pe)}function oe(e){return typeof e=="function"}function R(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ie;function Ze(e,t){return ie||(ie=document.createElement("a")),ie.href=t,e===ie.href}function Qe(e){return Object.keys(e).length===0}const je=typeof window<"u";let Oe=je?()=>window.performance.now():()=>Date.now(),_e=je?e=>requestAnimationFrame(e):M;const W=new Set;function Ke(e){W.forEach(t=>{t.c(e)||(W.delete(t),t.f())}),W.size!==0&&_e(Ke)}function Le(e){let t;return W.size===0&&_e(Ke),{promise:new Promise(n=>{W.add(t={c:e,f:n})}),abort(){W.delete(t)}}}function h(e,t){e.appendChild(t)}function ze(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Xe(e){const t=b("style");return et(ze(e),t),t.sheet}function et(e,t){return h(e.head||e,t),t.sheet}function I(e,t,n){e.insertBefore(t,n||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function tt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function b(e){return document.createElement(e)}function B(e){return document.createTextNode(e)}function N(){return B(" ")}function nt(){return B("")}function T(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function g(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function it(e){return Array.from(e.childNodes)}function Y(e,t){t=""+t,e.data!==t&&(e.data=t)}function $e(e,t){e.value=t??""}function ke(e,t,n){for(let i=0;i<e.options.length;i+=1){const a=e.options[i];if(a.__value===t){a.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function at(e){const t=e.querySelector(":checked");return t&&t.__value}function Fe(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const a=document.createEvent("CustomEvent");return a.initCustomEvent(e,n,i,t),a}const re=new Map;let se=0;function rt(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function st(e,t){const n={stylesheet:Xe(t),rules:{}};return re.set(e,n),n}function de(e,t,n,i,a,r,s,o=0){const l=16.666/i;let c=`{
`;for(let d=0;d<=1;d+=l){const p=t+(n-t)*r(d);c+=d*100+`%{${s(p,1-p)}}
`}const f=c+`100% {${s(n,1-n)}}
}`,v=`__svelte_${rt(f)}_${o}`,w=ze(e),{stylesheet:u,rules:_}=re.get(w)||st(w,e);_[v]||(_[v]=!0,u.insertRule(`@keyframes ${v} ${f}`,u.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${v} ${i}ms linear ${a}ms 1 both`,se+=1,v}function pe(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),a=n.length-i.length;a&&(e.style.animation=i.join(", "),se-=a,se||ot())}function ot(){_e(()=>{se||(re.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&S(t)}),re.clear())})}let ee;function Q(e){ee=e}function Be(){if(!ee)throw new Error("Function called outside component initialization");return ee}function lt(e){Be().$$.on_mount.push(e)}function He(){const e=Be();return(t,n,{cancelable:i=!1}={})=>{const a=e.$$.callbacks[t];if(a){const r=Fe(t,n,{cancelable:i});return a.slice().forEach(s=>{s.call(e,r)}),!r.defaultPrevented}return!0}}function Re(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(i=>i.call(this,t))}const G=[],J=[];let V=[];const he=[],ct=Promise.resolve();let ge=!1;function ut(){ge||(ge=!0,ct.then(De))}function L(e){V.push(e)}function le(e){he.push(e)}const ce=new Set;let q=0;function De(){if(q!==0)return;const e=ee;do{try{for(;q<G.length;){const t=G[q];q++,Q(t),ft(t.$$)}}catch(t){throw G.length=0,q=0,t}for(Q(null),G.length=0,q=0;J.length;)J.pop()();for(let t=0;t<V.length;t+=1){const n=V[t];ce.has(n)||(ce.add(n),n())}V.length=0}while(G.length);for(;he.length;)he.pop()();ge=!1,ce.clear(),Q(e)}function ft(e){if(e.fragment!==null){e.update(),j(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(L)}}function dt(e){const t=[],n=[];V.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),V=t}let Z;function Ue(){return Z||(Z=Promise.resolve(),Z.then(()=>{Z=null})),Z}function X(e,t,n){e.dispatchEvent(Fe(`${t?"intro":"outro"}${n}`))}const ae=new Set;let K;function qe(){K={r:0,c:[],p:K}}function Ge(){K.r||j(K.c),K=K.p}function A(e,t){e&&e.i&&(ae.delete(e),e.i(t))}function P(e,t,n,i){if(e&&e.o){if(ae.has(e))return;ae.add(e),K.c.push(()=>{ae.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const We={duration:0};function Je(e,t,n){const i={direction:"in"};let a=t(e,n,i),r=!1,s,o,l=0;function c(){s&&pe(e,s)}function f(){const{delay:w=0,duration:u=300,easing:_=me,tick:m=M,css:d}=a||We;d&&(s=de(e,0,1,u,w,_,d,l++)),m(0,1);const p=Oe()+w,k=p+u;o&&o.abort(),r=!0,L(()=>X(e,!0,"start")),o=Le(y=>{if(r){if(y>=k)return m(1,0),X(e,!0,"end"),c(),r=!1;if(y>=p){const x=_((y-p)/u);m(x,1-x)}}return r})}let v=!1;return{start(){v||(v=!0,pe(e),oe(a)?(a=a(i),Ue().then(f)):f())},invalidate(){v=!1},end(){r&&(c(),r=!1)}}}function xe(e,t,n,i){const a={direction:"both"};let r=t(e,n,a),s=i?0:1,o=null,l=null,c=null;function f(){c&&pe(e,c)}function v(u,_){const m=u.b-s;return _*=Math.abs(m),{a:s,b:u.b,d:m,duration:_,start:u.start,end:u.start+_,group:u.group}}function w(u){const{delay:_=0,duration:m=300,easing:d=me,tick:p=M,css:k}=r||We,y={start:Oe()+_,b:u};u||(y.group=K,K.r+=1),o||l?l=y:(k&&(f(),c=de(e,s,u,m,_,d,k)),u&&p(0,1),o=v(y,m),L(()=>X(e,u,"start")),Le(x=>{if(l&&x>l.start&&(o=v(l,m),l=null,X(e,o.b,"start"),k&&(f(),c=de(e,s,o.b,o.duration,0,d,r.css))),o){if(x>=o.end)p(s=o.b,1-s),X(e,o.b,"end"),l||(o.b?f():--o.group.r||j(o.group.c)),o=null;else if(x>=o.start){const C=x-o.start;s=o.a+o.d*d(C/o.duration),p(s,1-s)}}return!!(o||l)}))}return{run(u){oe(r)?Ue().then(()=>{r=r(a),w(u)}):w(u)},end(){f(),o=l=null}}}function ue(e,t,n){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function H(e){e&&e.c()}function z(e,t,n,i){const{fragment:a,after_update:r}=e.$$;a&&a.m(t,n),i||L(()=>{const s=e.$$.on_mount.map(Pe).filter(oe);e.$$.on_destroy?e.$$.on_destroy.push(...s):j(s),e.$$.on_mount=[]}),r.forEach(L)}function F(e,t){const n=e.$$;n.fragment!==null&&(dt(n.after_update),j(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function pt(e,t){e.$$.dirty[0]===-1&&(G.push(e),ut(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function D(e,t,n,i,a,r,s,o=[-1]){const l=ee;Q(e);const c=e.$$={fragment:null,ctx:[],props:r,update:M,not_equal:a,bound:ye(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:ye(),dirty:o,skip_bound:!1,root:t.target||l.$$.root};s&&s(c.root);let f=!1;if(c.ctx=n?n(e,t.props||{},(v,w,...u)=>{const _=u.length?u[0]:w;return c.ctx&&a(c.ctx[v],c.ctx[v]=_)&&(!c.skip_bound&&c.bound[v]&&c.bound[v](_),f&&pt(e,v)),w}):[],c.update(),f=!0,j(c.before_update),c.fragment=i?i(c.ctx):!1,t.target){if(t.hydrate){const v=it(t.target);c.fragment&&c.fragment.l(v),v.forEach(S)}else c.fragment&&c.fragment.c();t.intro&&A(e.$$.fragment),z(e,t.target,t.anchor,t.customElement),De()}Q(l)}class U{$destroy(){F(this,1),this.$destroy=M}$on(t,n){if(!oe(n))return M;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const a=i.indexOf(n);a!==-1&&i.splice(a,1)}}$set(t){this.$$set&&!Qe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ht(e){let t,n,i,a,r,s,o,l,c,f,v,w,u,_,m,d,p,k,y,x,C,E;return{c(){t=b("div"),n=b("div"),i=b("div"),a=b("button"),a.textContent="Fix grammar",r=N(),s=b("div"),o=b("button"),o.textContent="Elaborate",l=N(),c=b("div"),f=b("button"),f.textContent="Rewrite",v=N(),w=b("div"),u=b("button"),u.textContent="Summarize",_=N(),m=b("div"),d=b("div"),p=b("span"),k=B(e[0]),y=N(),x=b("button"),x.textContent="Translate to",g(a,"class","btn btn-accent w-32"),g(i,"class","text-primary-content grid place-content-center rounded"),g(o,"class","btn btn-accent w-32"),g(s,"class","text-accent-content grid place-content-center rounded"),g(f,"class","btn btn-accent w-32"),g(c,"class","text-secondary-content grid place-content-center rounded"),g(u,"class","btn btn-accent w-32"),g(w,"class","text-secondary-content grid place-content-center rounded"),g(p,"class","indicator-item indicator-top indicator-right badge badge-secondary"),g(x,"class","btn btn-accent w-32"),g(d,"class","indicator"),g(m,"class","text-secondary-content grid col-span-2 place-content-center rounded"),g(n,"class","grid grid-cols-2 gap-4 gap-y-8"),g(t,"class","flex justify-center")},m($,O){I($,t,O),h(t,n),h(n,i),h(i,a),h(n,r),h(n,s),h(s,o),h(n,l),h(n,c),h(c,f),h(n,v),h(n,w),h(w,u),h(n,_),h(n,m),h(m,d),h(d,p),h(p,k),h(d,y),h(d,x),C||(E=[T(a,"click",e[2]),T(o,"click",e[3]),T(f,"click",e[4]),T(u,"click",e[5]),T(x,"click",e[6])],C=!0)},p($,[O]){O&1&&Y(k,$[0])},i:M,o:M,d($){$&&S(t),C=!1,j(E)}}}function gt(e,t,n){const i=He();let{language:a="EN"}=t;const r=()=>i("grammar"),s=()=>i("elaborate"),o=()=>i("rewrite"),l=()=>i("summarize"),c=()=>i("translate");return e.$$set=f=>{"language"in f&&n(0,a=f.language)},[a,i,r,s,o,l,c]}class mt extends U{constructor(t){super(),D(this,t,gt,ht,R,{language:0})}}const _t=""+new URL("mini-natto-56922c88.png",import.meta.url).href;function Ee(e){let t;return{c(){t=b("span"),g(t,"class","loading loading-spinner loading-sm")},m(n,i){I(n,t,i)},d(n){n&&S(t)}}}function bt(e){let t,n,i,a,r,s,o,l,c,f,v,w=e[0]&&Ee();return{c(){t=b("div"),n=b("div"),i=b("a"),i.textContent="Chrome Natto",a=N(),w&&w.c(),r=N(),s=b("div"),o=b("div"),l=b("div"),c=b("div"),f=b("img"),g(i,"class","btn btn-ghost text-xl"),g(n,"class","flex-1"),g(f,"alt","Logo"),Ze(f.src,v=_t)||g(f,"src",v),g(c,"class","w-10 rounded-full"),g(l,"tabindex","0"),g(l,"role","button"),g(l,"class","btn btn-ghost btn-circle avatar"),g(o,"class","dropdown dropdown-end"),g(s,"class","flex-none gap-2"),g(t,"class","navbar")},m(u,_){I(u,t,_),h(t,n),h(n,i),h(n,a),w&&w.m(n,null),h(t,r),h(t,s),h(s,o),h(o,l),h(l,c),h(c,f)},p(u,[_]){u[0]?w||(w=Ee(),w.c(),w.m(n,null)):w&&(w.d(1),w=null)},i:M,o:M,d(u){u&&S(t),w&&w.d()}}}function vt(e,t,n){let{processing:i=!1}=t;return e.$$set=a=>{"processing"in a&&n(0,i=a.processing)},[i]}class wt extends U{constructor(t){super(),D(this,t,vt,bt,R,{processing:0})}}function yt(e){let t,n,i,a,r,s;return{c(){t=b("div"),n=b("button"),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>',i=N(),a=b("button"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',g(n,"class","active"),g(a,"class","active"),g(t,"class","btm-nav h-min-0 h-12")},m(o,l){I(o,t,l),h(t,n),h(t,i),h(t,a),r||(s=[T(n,"click",e[2]),T(a,"click",e[3])],r=!0)},p:M,i:M,o:M,d(o){o&&S(t),r=!1,j(s)}}}function $t(e,t,n){const i=He();let{language:a="EN"}=t;const r=()=>i("home"),s=()=>i("options");return e.$$set=o=>{"language"in o&&n(1,a=o.language)},[i,a,r,s]}class kt extends U{constructor(t){super(),D(this,t,$t,yt,R,{language:1})}}function Me(e,t,n){const i=e.slice();return i[5]=t[n],i}function Ne(e){let t,n=e[5]+"",i,a;return{c(){t=b("option"),i=B(n),t.__value=a=e[5],t.value=t.__value},m(r,s){I(r,t,s),h(t,i)},p(r,s){s&4&&n!==(n=r[5]+"")&&Y(i,n),s&4&&a!==(a=r[5])&&(t.__value=a,t.value=t.__value)},d(r){r&&S(t)}}}function xt(e){let t,n,i,a,r,s,o,l=(e[0]||"Pick one")+"",c,f,v,w,u=e[2],_=[];for(let m=0;m<u.length;m+=1)_[m]=Ne(Me(e,u,m));return{c(){t=b("label"),n=b("div"),i=b("span"),a=B(e[1]),r=N(),s=b("select"),o=b("option"),c=B(l);for(let m=0;m<_.length;m+=1)_[m].c();g(i,"class","label-text"),g(n,"class","label"),o.disabled=!0,o.selected=!0,o.__value=f=e[0]||"Pick one",o.value=o.__value,g(s,"class","select select-bordered"),e[0]===void 0&&L(()=>e[4].call(s)),g(t,"class","form-control w-full max-w-xs")},m(m,d){I(m,t,d),h(t,n),h(n,i),h(i,a),h(t,r),h(t,s),h(s,o),h(o,c);for(let p=0;p<_.length;p+=1)_[p]&&_[p].m(s,null);ke(s,e[0],!0),v||(w=[T(s,"change",e[4]),T(s,"change",e[3])],v=!0)},p(m,[d]){if(d&2&&Y(a,m[1]),d&1&&l!==(l=(m[0]||"Pick one")+"")&&Y(c,l),d&5&&f!==(f=m[0]||"Pick one")&&(o.__value=f,o.value=o.__value),d&4){u=m[2];let p;for(p=0;p<u.length;p+=1){const k=Me(m,u,p);_[p]?_[p].p(k,d):(_[p]=Ne(k),_[p].c(),_[p].m(s,null))}for(;p<_.length;p+=1)_[p].d(1);_.length=u.length}d&5&&ke(s,m[0])},i:M,o:M,d(m){m&&S(t),tt(_,m),v=!1,j(w)}}}function Et(e,t,n){let{label:i=""}=t,{options:a=[]}=t,{selection:r=""}=t;function s(l){Re.call(this,e,l)}function o(){r=at(this),n(0,r),n(2,a)}return e.$$set=l=>{"label"in l&&n(1,i=l.label),"options"in l&&n(2,a=l.options),"selection"in l&&n(0,r=l.selection)},[r,i,a,s,o]}class Se extends U{constructor(t){super(),D(this,t,Et,xt,R,{label:1,options:2,selection:0})}}function Mt(e){let t,n,i,a,r,s,o,l;return{c(){t=b("label"),n=b("div"),i=b("span"),a=B(e[1]),r=N(),s=b("input"),g(i,"class","label-text"),g(n,"class","label"),g(s,"type","password"),g(s,"placeholder",e[0]),g(s,"class","input input-bordered"),g(t,"class","form-control w-full max-w-xs")},m(c,f){I(c,t,f),h(t,n),h(n,i),h(i,a),h(t,r),h(t,s),$e(s,e[0]),o||(l=[T(s,"input",e[3]),T(s,"change",e[2])],o=!0)},p(c,[f]){f&2&&Y(a,c[1]),f&1&&g(s,"placeholder",c[0]),f&1&&s.value!==c[0]&&$e(s,c[0])},i:M,o:M,d(c){c&&S(t),o=!1,j(l)}}}function Nt(e,t,n){let{label:i=""}=t,{value:a=""}=t;function r(o){Re.call(this,e,o)}function s(){a=this.value,n(0,a)}return e.$$set=o=>{"label"in o&&n(1,i=o.label),"value"in o&&n(0,a=o.value)},[a,i,r,s]}class St extends U{constructor(t){super(),D(this,t,Nt,Mt,R,{label:1,value:0})}}function At(e){const t=e-1;return t*t*t+1}function Ae(e,{delay:t=0,duration:n=400,easing:i=me}={}){const a=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:i,css:r=>`opacity: ${r*a}`}}function Ve(e,{delay:t=0,duration:n=400,easing:i=At,axis:a="y"}={}){const r=getComputedStyle(e),s=+r.opacity,o=a==="y"?"height":"width",l=parseFloat(r[o]),c=a==="y"?["top","bottom"]:["left","right"],f=c.map(p=>`${p[0].toUpperCase()}${p.slice(1)}`),v=parseFloat(r[`padding${f[0]}`]),w=parseFloat(r[`padding${f[1]}`]),u=parseFloat(r[`margin${f[0]}`]),_=parseFloat(r[`margin${f[1]}`]),m=parseFloat(r[`border${f[0]}Width`]),d=parseFloat(r[`border${f[1]}Width`]);return{delay:t,duration:n,easing:i,css:p=>`overflow: hidden;opacity: ${Math.min(p*20,1)*s};${o}: ${p*l}px;padding-${c[0]}: ${p*v}px;padding-${c[1]}: ${p*w}px;margin-${c[0]}: ${p*u}px;margin-${c[1]}: ${p*_}px;border-${c[0]}-width: ${p*m}px;border-${c[1]}-width: ${p*d}px;`}}function Ie(e){let t,n,i,a,r,s,o;return{c(){t=b("div"),n=b("div"),i=b("span"),a=B(e[0]),g(n,"class",r="alert text-wrap "+(e[2]?"alert-info":"alert-error")),g(t,"class","toast toast-end")},m(l,c){I(l,t,c),h(t,n),h(n,i),h(i,a),o=!0},p(l,c){(!o||c&1)&&Y(a,l[0]),(!o||c&4&&r!==(r="alert text-wrap "+(l[2]?"alert-info":"alert-error")))&&g(n,"class",r)},i(l){o||(L(()=>{o&&(s||(s=xe(t,Ae,{},!0)),s.run(1))}),o=!0)},o(l){s||(s=xe(t,Ae,{},!1)),s.run(0),o=!1},d(l){l&&S(t),l&&s&&s.end()}}}function It(e){let t,n,i=e[1]&&Ie(e);return{c(){i&&i.c(),t=nt()},m(a,r){i&&i.m(a,r),I(a,t,r),n=!0},p(a,[r]){a[1]?i?(i.p(a,r),r&2&&A(i,1)):(i=Ie(a),i.c(),A(i,1),i.m(t.parentNode,t)):i&&(qe(),P(i,1,1,()=>{i=null}),Ge())},i(a){n||(A(i),n=!0)},o(a){P(i),n=!1},d(a){i&&i.d(a),a&&S(t)}}}const Ce=40;function Ct(e,t,n){let i="",a=!1,r=!0;function s(o,l){n(0,i=o.length>Ce?o.slice(0,Ce)+"...":o),n(1,a=!0),n(2,r=l),setTimeout(()=>{n(1,a=!1)},3e3)}return[i,a,r,s]}class Tt extends U{constructor(t){super(),D(this,t,Ct,It,R,{setMessage:3})}get setMessage(){return this.$$.ctx[3]}}function te(e={model:"gpt-4o-mini",temperature:0},t=[]){return n=>{const i={role:"user",content:n},a=[...t,i];return jt(a,e).then(r=>{const s=Pt(r);return t.push(i),t.push(s.message),s})}}function ne(e){return e.message}function Pt(e){const{error:t,object:n,created:i,model:a,usage:r,system_fingerprint:s}=e;if(t)throw t.message;const o=e.choices[0];if(o.finish_reason==="stop")return{object:n,created:i,model:a,usage:r,system_fingerprint:s,message:o.message};throw new Error("No response from AI")}function jt(e,t){let{apiKey:n,...i}=t;try{n||(n={}.OPENAI_API_KEY)}catch{}return fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({...i,messages:e})}).then(a=>a.json())}async function Ot(){const[e]=await chrome.tabs.query({active:!0,currentWindow:!0});return e}async function Kt(){return(await Ot()).id}async function Te(e){const t=await Kt();if(!t)return;let n=await chrome.webNavigation.getAllFrames({tabId:t}),i=[];return n==null||n.forEach(a=>{let r=chrome.tabs.sendMessage(t,e,{frameId:a.frameId});i.push(r)}),Promise.all(i)}function fe(e){return new Promise((t,n)=>{chrome.storage.local.get(e,async i=>{const a=i[e];t(a)})})}async function Lt(e,t,n){return(await(await te({model:t,apiKey:e}))(`
        Fix the typos, punctuation and lettercase of this text. Keep the same language. 
        Do not add any text that is not there. 
        If the sentence is already correct, just leave it.
        If the sentence cannot be fixed, just leave it as it is.
        If no text is provided, just leave it as it is.
        
        Here the text:${n}`).then(ne)).content}async function zt(e,t,n){return(await(await te({model:t,apiKey:e}))(`
        Elaborate on the following text with more details. Provide more background or information. 
        Expand on the ideas, but keep the length of the final text similar in length to the input of the text below.
        Keep the same language.
        If no text is provided, just leave it as it is.

        Here the text:${n}`).then(ne)).content}async function Ft(e,t,n){return(await(await te({model:t,apiKey:e}))(`
        Paraphrase this text. Rewrite it with different words but keep the same length. 
        Keep the same language. If no text is provided, just leave it as it is.

        Here the text:${n}`).then(ne)).content}async function Bt(e,t,n){return(await(await te({model:t,apiKey:e}))(`
        Summarize the following text. Keep the same language.
        If no text is provided, just leave it as it is.

        Here the text:${n}`).then(ne)).content}async function Ht(e,t,n,i){return(await(await te({model:t,apiKey:e}))(`
      Translate the text in the ${i} language.
      Do not modify the text, its meaning or its tone.
      If no text is provided, just leave it as it is.

      Here the text:${n}`).then(ne)).content}const Rt=["Abkhaz","Afar","Afrikaans","Akan","Albanian","Amharic","Arabic","Aragonese","Armenian","Assamese","Avaric","Avestan","Aymara","Azerbaijani","Bambara","Bashkir","Basque","Belarusian","Bengali","Bihari","Bislama","Bosnian","Breton","Bulgarian","Burmese","Catalan","Chamorro","Chechen","Chichewa","Chinese","Chuvash","Cornish","Corsican","Cree","Croatian","Czech","Danish","Divehi","Dutch","Dzongkha","English","Esperanto","Estonian","Ewe","Faroese","Fijian","Finnish","French","Fulah","Galician","Georgian","German","Greek","Guarani","Gujarati","Haitian","Hausa","Hebrew","Herero","Hindi","Hiri Motu","Hungarian","Interlingua","Indonesian","Interlingue","Irish","Igbo","Inupiaq","Ido","Icelandic","Italian","Inuktitut","Japanese","Javanese","Kalaallisut","Kannada","Kanuri","Kashmiri","Kazakh","Khmer","Kikuyu","Kinyarwanda","Kirghiz","Komi","Kongo","Korean","Kurdish","Kwanyama","Latin","Luxembourgish","Ganda","Limburgish","Lingala","Lao","Lithuanian","Luba-Katanga","Latvian","Manx","Macedonian","Malagasy","Malay","Malayalam","Maltese","Maori","Marathi","Marshallese","Mongolian","Nauru","Navajo","Norwegian Bokmål","North Ndebele","Nepali","Ndonga","Norwegian Nynorsk","Norwegian","Nuosu","South Ndebele","Occitan","Ojibwa","Old Church Slavonic","Oromo","Oriya","Ossetian","Panjabi","Pāli","Persian","Polish","Pashto","Portuguese","Quechua","Romansh","Kirundi","Romanian","Russian","Sanskrit","Sardinian","Sindhi","Northern Sami","Samoan","Sango","Serbian","Gaelic","Shona","Sinhala","Slovak","Slovenian","Somali","Southern Sotho","Spanish","Sundanese","Swahili","Swati","Swedish","Tamil","Telugu","Tajik","Thai","Tigrinya","Tibetan","Turkmen","Tagalog","Tswana","Tonga","Turkish","Tsonga","Tatar","Twi","Tahitian","Uyghur","Ukrainian","Urdu","Uzbek","Venda","Vietnamese","Volapük","Walloon","Wolof","Xhosa","Yiddish","Yoruba","Zhuang","Zulu"];function Dt(e){let t,n,i,a,r,s,o,l,c,f,v,w,u,_,m,d;function p($){e[10]($)}let k={label:"Pick a language",options:Rt};e[1]!==void 0&&(k.selection=e[1]),a=new Se({props:k}),J.push(()=>ue(a,"selection",p)),a.$on("change",e[8]);function y($){e[11]($)}let x={label:"Pick a model",options:["gpt-4o-mini","gpt-4o"]};e[2]!==void 0&&(x.selection=e[2]),l=new Se({props:x}),J.push(()=>ue(l,"selection",y)),l.$on("change",e[7]);function C($){e[12]($)}let E={label:"Input your API key"};return e[3]!==void 0&&(E.value=e[3]),u=new St({props:E}),J.push(()=>ue(u,"value",C)),u.$on("change",e[9]),{c(){t=b("div"),n=b("div"),i=b("div"),H(a.$$.fragment),s=N(),o=b("div"),H(l.$$.fragment),f=N(),v=b("div"),v.textContent="Settings",w=N(),H(u.$$.fragment),g(i,"class","grid"),g(o,"class","grid mt-4"),g(v,"class","divider"),g(n,"class","w-64 h-96"),g(t,"class","flex justify-center")},m($,O){I($,t,O),h(t,n),h(n,i),z(a,i,null),h(n,s),h(n,o),z(l,o,null),h(n,f),h(n,v),h(n,w),z(u,n,null),d=!0},p($,O){e=$;const be={};!r&&O&2&&(r=!0,be.selection=e[1],le(()=>r=!1)),a.$set(be);const ve={};!c&&O&4&&(c=!0,ve.selection=e[2],le(()=>c=!1)),l.$set(ve);const we={};!_&&O&8&&(_=!0,we.value=e[3],le(()=>_=!1)),u.$set(we)},i($){d||(A(a.$$.fragment,$),A(l.$$.fragment,$),A(u.$$.fragment,$),m||L(()=>{m=Je(t,Ve,{axis:"x",duration:Ye}),m.start()}),d=!0)},o($){P(a.$$.fragment,$),P(l.$$.fragment,$),P(u.$$.fragment,$),d=!1},d($){$&&S(t),F(a),F(l),F(u)}}}function Ut(e){let t,n,i,a;return n=new mt({props:{language:e[1]}}),n.$on("grammar",e[6]("fix_grammar")),n.$on("elaborate",e[6]("elaborate")),n.$on("rewrite",e[6]("rewrite")),n.$on("summarize",e[6]("summarize")),n.$on("translate",e[6]("translate")),{c(){t=b("div"),H(n.$$.fragment),g(t,"class","flex items-center justify-center")},m(r,s){I(r,t,s),z(n,t,null),a=!0},p(r,s){e=r;const o={};s&2&&(o.language=e[1]),n.$set(o)},i(r){a||(A(n.$$.fragment,r),i||L(()=>{i=Je(t,Ve,{axis:"x",duration:Ye}),i.start()}),a=!0)},o(r){P(n.$$.fragment,r),a=!1},d(r){r&&S(t),F(n)}}}function qt(e){let t,n,i,a,r,s,o,l,c,f,v;i=new wt({props:{processing:e[5]}});const w=[Ut,Dt],u=[];function _(d,p){return d[0]?0:1}r=_(e),s=u[r]=w[r](e),l=new kt({}),l.$on("home",e[13]),l.$on("options",e[14]);let m={};return f=new Tt({props:m}),e[15](f),{c(){t=b("div"),n=b("div"),H(i.$$.fragment),a=N(),s.c(),o=N(),H(l.$$.fragment),c=N(),H(f.$$.fragment),g(n,"class","mb-6"),g(t,"class","bg-base-100 ml-4 mr-4 w-80 h-96")},m(d,p){I(d,t,p),h(t,n),z(i,n,null),h(t,a),u[r].m(t,null),h(t,o),z(l,t,null),I(d,c,p),z(f,d,p),v=!0},p(d,[p]){const k={};p&32&&(k.processing=d[5]),i.$set(k);let y=r;r=_(d),r===y?u[r].p(d,p):(qe(),P(u[y],1,1,()=>{u[y]=null}),Ge(),s=u[r],s?s.p(d,p):(s=u[r]=w[r](d),s.c()),A(s,1),s.m(t,o));const x={};f.$set(x)},i(d){v||(A(i.$$.fragment,d),A(s),A(l.$$.fragment,d),A(f.$$.fragment,d),v=!0)},o(d){P(i.$$.fragment,d),P(s),P(l.$$.fragment,d),P(f.$$.fragment,d),v=!1},d(d){d&&S(t),F(i),u[r].d(),F(l),d&&S(c),e[15](null),F(f,d)}}}const Ye=400;function Gt(e,t,n){let i=!0,a="English",r="gpt-4o-mini",s="sk-proj-TrU-RWW...",o,l=!1;lt(async()=>{n(3,s=await fe("natto_apikey")??s),n(2,r=await fe("natto_model")??r),n(1,a=await fe("natto_translation_language")??a),chrome.runtime.sendMessage({ready:!0})});function c(y){return async function(){const C=(await Te({action:"get_selected_text"})).find(({text:$})=>$.length>0);if(!C||!C.text){o.setMessage("No text selected",!1);return}let{text:E}=C;n(5,l=!0);try{if(y=="fix_grammar")E=await Lt(s,r,E);else if(y=="elaborate")E=await zt(s,r,E);else if(y=="rewrite")E=await Ft(s,r,E);else if(y=="summarize")E=await Bt(s,r,E);else if(y=="translate")E=await Ht(s,r,E,a);else throw new Error("Unable to perform this action")}catch($){o.setMessage($.substring(0,40)+"...",!1),n(5,l=!1);return}await Te({action:"replace_selected_text",text:E}),o.setMessage("Done",!0),n(5,l=!1)}}async function f(y){await chrome.storage.local.set({natto_model:r})}async function v(y){await chrome.storage.local.set({natto_translation_language:a})}async function w(y){await chrome.storage.local.set({natto_apikey:s}),o.setMessage("Updated",!0)}function u(y){a=y,n(1,a)}function _(y){r=y,n(2,r)}function m(y){s=y,n(3,s)}const d=()=>n(0,i=!0),p=()=>n(0,i=!1);function k(y){J[y?"unshift":"push"](()=>{o=y,n(4,o)})}return[i,a,r,s,o,l,c,f,v,w,u,_,m,d,p,k]}class Wt extends U{constructor(t){super(),D(this,t,Gt,qt,R,{})}}new Wt({target:document.getElementById("app")});
