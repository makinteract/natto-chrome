(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function E(){}const me=e=>e;function Ie(e){return e()}function ye(){return Object.create(null)}function P(e){e.forEach(Ie)}function se(e){return typeof e=="function"}function H(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ae;function Qe(e,t){return ae||(ae=document.createElement("a")),ae.href=t,e===ae.href}function Xe(e){return Object.keys(e).length===0}const Oe=typeof window<"u";let je=Oe?()=>window.performance.now():()=>Date.now(),_e=Oe?e=>requestAnimationFrame(e):E;const G=new Set;function Ke(e){G.forEach(t=>{t.c(e)||(G.delete(t),t.f())}),G.size!==0&&_e(Ke)}function Le(e){let t;return G.size===0&&_e(Ke),{promise:new Promise(n=>{G.add(t={c:e,f:n})}),abort(){G.delete(t)}}}function h(e,t){e.appendChild(t)}function Be(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function et(e){const t=b("style");return tt(Be(e),t),t.sheet}function tt(e,t){return h(e.head||e,t),t.sheet}function N(e,t,n){e.insertBefore(t,n||null)}function C(e){e.parentNode&&e.parentNode.removeChild(e)}function nt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function b(e){return document.createElement(e)}function z(e){return document.createTextNode(e)}function S(){return z(" ")}function at(){return z("")}function A(e,t,n,a){return e.addEventListener(t,n,a),()=>e.removeEventListener(t,n,a)}function g(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function it(e){return Array.from(e.childNodes)}function V(e,t){t=""+t,e.data!==t&&(e.data=t)}function $e(e,t){e.value=t??""}function ke(e,t,n){for(let a=0;a<e.options.length;a+=1){const i=e.options[a];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function rt(e){const t=e.querySelector(":checked");return t&&t.__value}function ze(e,t,{bubbles:n=!1,cancelable:a=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,a,t),i}const re=new Map;let oe=0;function ot(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function st(e,t){const n={stylesheet:et(t),rules:{}};return re.set(e,n),n}function de(e,t,n,a,i,r,o,s=0){const l=16.666/a;let c=`{
`;for(let d=0;d<=1;d+=l){const p=t+(n-t)*r(d);c+=d*100+`%{${o(p,1-p)}}
`}const f=c+`100% {${o(n,1-n)}}
}`,v=`__svelte_${ot(f)}_${s}`,w=Be(e),{stylesheet:u,rules:_}=re.get(w)||st(w,e);_[v]||(_[v]=!0,u.insertRule(`@keyframes ${v} ${f}`,u.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${v} ${a}ms linear ${i}ms 1 both`,oe+=1,v}function pe(e,t){const n=(e.style.animation||"").split(", "),a=n.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),i=n.length-a.length;i&&(e.style.animation=a.join(", "),oe-=i,oe||lt())}function lt(){_e(()=>{oe||(re.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&C(t)}),re.clear())})}let ee;function Q(e){ee=e}function Fe(){if(!ee)throw new Error("Function called outside component initialization");return ee}function ct(e){Fe().$$.on_mount.push(e)}function He(){const e=Fe();return(t,n,{cancelable:a=!1}={})=>{const i=e.$$.callbacks[t];if(i){const r=ze(t,n,{cancelable:a});return i.slice().forEach(o=>{o.call(e,r)}),!r.defaultPrevented}return!0}}function Re(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(a=>a.call(this,t))}const q=[],W=[];let J=[];const he=[],ut=Promise.resolve();let ge=!1;function ft(){ge||(ge=!0,ut.then(De))}function K(e){J.push(e)}function le(e){he.push(e)}const ce=new Set;let U=0;function De(){if(U!==0)return;const e=ee;do{try{for(;U<q.length;){const t=q[U];U++,Q(t),dt(t.$$)}}catch(t){throw q.length=0,U=0,t}for(Q(null),q.length=0,U=0;W.length;)W.pop()();for(let t=0;t<J.length;t+=1){const n=J[t];ce.has(n)||(ce.add(n),n())}J.length=0}while(q.length);for(;he.length;)he.pop()();ge=!1,ce.clear(),Q(e)}function dt(e){if(e.fragment!==null){e.update(),P(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(K)}}function pt(e){const t=[],n=[];J.forEach(a=>e.indexOf(a)===-1?t.push(a):n.push(a)),n.forEach(a=>a()),J=t}let Z;function Ue(){return Z||(Z=Promise.resolve(),Z.then(()=>{Z=null})),Z}function X(e,t,n){e.dispatchEvent(ze(`${t?"intro":"outro"}${n}`))}const ie=new Set;let j;function qe(){j={r:0,c:[],p:j}}function Ge(){j.r||P(j.c),j=j.p}function M(e,t){e&&e.i&&(ie.delete(e),e.i(t))}function T(e,t,n,a){if(e&&e.o){if(ie.has(e))return;ie.add(e),j.c.push(()=>{ie.delete(e),a&&(n&&e.d(1),a())}),e.o(t)}else a&&a()}const We={duration:0};function Je(e,t,n){const a={direction:"in"};let i=t(e,n,a),r=!1,o,s,l=0;function c(){o&&pe(e,o)}function f(){const{delay:w=0,duration:u=300,easing:_=me,tick:m=E,css:d}=i||We;d&&(o=de(e,0,1,u,w,_,d,l++)),m(0,1);const p=je()+w,x=p+u;s&&s.abort(),r=!0,K(()=>X(e,!0,"start")),s=Le(y=>{if(r){if(y>=x)return m(1,0),X(e,!0,"end"),c(),r=!1;if(y>=p){const $=_((y-p)/u);m($,1-$)}}return r})}let v=!1;return{start(){v||(v=!0,pe(e),se(i)?(i=i(a),Ue().then(f)):f())},invalidate(){v=!1},end(){r&&(c(),r=!1)}}}function xe(e,t,n,a){const i={direction:"both"};let r=t(e,n,i),o=a?0:1,s=null,l=null,c=null;function f(){c&&pe(e,c)}function v(u,_){const m=u.b-o;return _*=Math.abs(m),{a:o,b:u.b,d:m,duration:_,start:u.start,end:u.start+_,group:u.group}}function w(u){const{delay:_=0,duration:m=300,easing:d=me,tick:p=E,css:x}=r||We,y={start:je()+_,b:u};u||(y.group=j,j.r+=1),s||l?l=y:(x&&(f(),c=de(e,o,u,m,_,d,x)),u&&p(0,1),s=v(y,m),K(()=>X(e,u,"start")),Le($=>{if(l&&$>l.start&&(s=v(l,m),l=null,X(e,s.b,"start"),x&&(f(),c=de(e,o,s.b,s.duration,0,d,r.css))),s){if($>=s.end)p(o=s.b,1-o),X(e,s.b,"end"),l||(s.b?f():--s.group.r||P(s.group.c)),s=null;else if($>=s.start){const I=$-s.start;o=s.a+s.d*d(I/s.duration),p(o,1-o)}}return!!(s||l)}))}return{run(u){se(r)?Ue().then(()=>{r=r(i),w(u)}):w(u)},end(){f(),s=l=null}}}function ue(e,t,n){const a=e.$$.props[t];a!==void 0&&(e.$$.bound[a]=n,n(e.$$.ctx[a]))}function F(e){e&&e.c()}function L(e,t,n,a){const{fragment:i,after_update:r}=e.$$;i&&i.m(t,n),a||K(()=>{const o=e.$$.on_mount.map(Ie).filter(se);e.$$.on_destroy?e.$$.on_destroy.push(...o):P(o),e.$$.on_mount=[]}),r.forEach(K)}function B(e,t){const n=e.$$;n.fragment!==null&&(pt(n.after_update),P(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ht(e,t){e.$$.dirty[0]===-1&&(q.push(e),ft(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function R(e,t,n,a,i,r,o,s=[-1]){const l=ee;Q(e);const c=e.$$={fragment:null,ctx:[],props:r,update:E,not_equal:i,bound:ye(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:ye(),dirty:s,skip_bound:!1,root:t.target||l.$$.root};o&&o(c.root);let f=!1;if(c.ctx=n?n(e,t.props||{},(v,w,...u)=>{const _=u.length?u[0]:w;return c.ctx&&i(c.ctx[v],c.ctx[v]=_)&&(!c.skip_bound&&c.bound[v]&&c.bound[v](_),f&&ht(e,v)),w}):[],c.update(),f=!0,P(c.before_update),c.fragment=a?a(c.ctx):!1,t.target){if(t.hydrate){const v=it(t.target);c.fragment&&c.fragment.l(v),v.forEach(C)}else c.fragment&&c.fragment.c();t.intro&&M(e.$$.fragment),L(e,t.target,t.anchor,t.customElement),De()}Q(l)}class D{$destroy(){B(this,1),this.$destroy=E}$on(t,n){if(!se(n))return E;const a=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return a.push(n),()=>{const i=a.indexOf(n);i!==-1&&a.splice(i,1)}}$set(t){this.$$set&&!Xe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function gt(e){let t,n,a,i,r,o,s,l,c,f,v,w,u,_,m,d,p,x,y,$,I,Y;return{c(){t=b("div"),n=b("div"),a=b("div"),i=b("button"),i.textContent="Fix grammar",r=S(),o=b("div"),s=b("button"),s.textContent="Elaborate",l=S(),c=b("div"),f=b("button"),f.textContent="Rewrite",v=S(),w=b("div"),u=b("button"),u.textContent="Summarize",_=S(),m=b("div"),d=b("div"),p=b("span"),x=z(e[0]),y=S(),$=b("button"),$.textContent="Translate to",g(i,"class","btn btn-accent w-32"),g(a,"class","text-primary-content grid place-content-center rounded"),g(s,"class","btn btn-accent w-32"),g(o,"class","text-accent-content grid place-content-center rounded"),g(f,"class","btn btn-accent w-32"),g(c,"class","text-secondary-content grid place-content-center rounded"),g(u,"class","btn btn-accent w-32"),g(w,"class","text-secondary-content grid place-content-center rounded"),g(p,"class","indicator-item indicator-top indicator-right badge badge-secondary"),g($,"class","btn btn-accent w-32"),g(d,"class","indicator"),g(m,"class","text-secondary-content grid col-span-2 place-content-center rounded"),g(n,"class","grid grid-cols-2 gap-4 gap-y-8"),g(t,"class","flex justify-center")},m(k,O){N(k,t,O),h(t,n),h(n,a),h(a,i),h(n,r),h(n,o),h(o,s),h(n,l),h(n,c),h(c,f),h(n,v),h(n,w),h(w,u),h(n,_),h(n,m),h(m,d),h(d,p),h(p,x),h(d,y),h(d,$),I||(Y=[A(i,"click",e[2]),A(s,"click",e[3]),A(f,"click",e[4]),A(u,"click",e[5]),A($,"click",e[6])],I=!0)},p(k,[O]){O&1&&V(x,k[0])},i:E,o:E,d(k){k&&C(t),I=!1,P(Y)}}}function mt(e,t,n){const a=He();let{language:i="EN"}=t;const r=()=>a("grammar"),o=()=>a("elaborate"),s=()=>a("rewrite"),l=()=>a("summarize"),c=()=>a("translate");return e.$$set=f=>{"language"in f&&n(0,i=f.language)},[i,a,r,o,s,l,c]}class _t extends D{constructor(t){super(),R(this,t,mt,gt,H,{language:0})}}const bt=""+new URL("mini-natto-56922c88.png",import.meta.url).href;function Ee(e){let t;return{c(){t=b("span"),g(t,"class","loading loading-spinner loading-sm")},m(n,a){N(n,t,a)},d(n){n&&C(t)}}}function vt(e){let t,n,a,i,r,o,s,l,c,f,v,w=e[0]&&Ee();return{c(){t=b("div"),n=b("div"),a=b("a"),a.textContent="Chrome Natto",i=S(),w&&w.c(),r=S(),o=b("div"),s=b("div"),l=b("div"),c=b("div"),f=b("img"),g(a,"class","btn btn-ghost text-xl"),g(n,"class","flex-1"),g(f,"alt","Logo"),Qe(f.src,v=bt)||g(f,"src",v),g(c,"class","w-10 rounded-full"),g(l,"tabindex","0"),g(l,"role","button"),g(l,"class","btn btn-ghost btn-circle avatar"),g(s,"class","dropdown dropdown-end"),g(o,"class","flex-none gap-2"),g(t,"class","navbar")},m(u,_){N(u,t,_),h(t,n),h(n,a),h(n,i),w&&w.m(n,null),h(t,r),h(t,o),h(o,s),h(s,l),h(l,c),h(c,f)},p(u,[_]){u[0]?w||(w=Ee(),w.c(),w.m(n,null)):w&&(w.d(1),w=null)},i:E,o:E,d(u){u&&C(t),w&&w.d()}}}function wt(e,t,n){let{processing:a=!1}=t;return e.$$set=i=>{"processing"in i&&n(0,a=i.processing)},[a]}class yt extends D{constructor(t){super(),R(this,t,wt,vt,H,{processing:0})}}function $t(e){let t,n,a,i,r,o;return{c(){t=b("div"),n=b("button"),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>',a=S(),i=b("button"),i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',g(n,"class","active"),g(i,"class","active"),g(t,"class","btm-nav h-min-0 h-12")},m(s,l){N(s,t,l),h(t,n),h(t,a),h(t,i),r||(o=[A(n,"click",e[2]),A(i,"click",e[3])],r=!0)},p:E,i:E,o:E,d(s){s&&C(t),r=!1,P(o)}}}function kt(e,t,n){const a=He();let{language:i="EN"}=t;const r=()=>a("home"),o=()=>a("options");return e.$$set=s=>{"language"in s&&n(1,i=s.language)},[a,i,r,o]}class xt extends D{constructor(t){super(),R(this,t,kt,$t,H,{language:1})}}function Se(e,t,n){const a=e.slice();return a[5]=t[n],a}function Ce(e){let t,n=e[5]+"",a,i;return{c(){t=b("option"),a=z(n),t.__value=i=e[5],t.value=t.__value},m(r,o){N(r,t,o),h(t,a)},p(r,o){o&4&&n!==(n=r[5]+"")&&V(a,n),o&4&&i!==(i=r[5])&&(t.__value=i,t.value=t.__value)},d(r){r&&C(t)}}}function Et(e){let t,n,a,i,r,o,s,l=(e[0]||"Pick one")+"",c,f,v,w,u=e[2],_=[];for(let m=0;m<u.length;m+=1)_[m]=Ce(Se(e,u,m));return{c(){t=b("label"),n=b("div"),a=b("span"),i=z(e[1]),r=S(),o=b("select"),s=b("option"),c=z(l);for(let m=0;m<_.length;m+=1)_[m].c();g(a,"class","label-text"),g(n,"class","label"),s.disabled=!0,s.selected=!0,s.__value=f=e[0]||"Pick one",s.value=s.__value,g(o,"class","select select-bordered"),e[0]===void 0&&K(()=>e[4].call(o)),g(t,"class","form-control w-full max-w-xs")},m(m,d){N(m,t,d),h(t,n),h(n,a),h(a,i),h(t,r),h(t,o),h(o,s),h(s,c);for(let p=0;p<_.length;p+=1)_[p]&&_[p].m(o,null);ke(o,e[0],!0),v||(w=[A(o,"change",e[4]),A(o,"change",e[3])],v=!0)},p(m,[d]){if(d&2&&V(i,m[1]),d&1&&l!==(l=(m[0]||"Pick one")+"")&&V(c,l),d&5&&f!==(f=m[0]||"Pick one")&&(s.__value=f,s.value=s.__value),d&4){u=m[2];let p;for(p=0;p<u.length;p+=1){const x=Se(m,u,p);_[p]?_[p].p(x,d):(_[p]=Ce(x),_[p].c(),_[p].m(o,null))}for(;p<_.length;p+=1)_[p].d(1);_.length=u.length}d&5&&ke(o,m[0])},i:E,o:E,d(m){m&&C(t),nt(_,m),v=!1,P(w)}}}function St(e,t,n){let{label:a=""}=t,{options:i=[]}=t,{selection:r=""}=t;function o(l){Re.call(this,e,l)}function s(){r=rt(this),n(0,r),n(2,i)}return e.$$set=l=>{"label"in l&&n(1,a=l.label),"options"in l&&n(2,i=l.options),"selection"in l&&n(0,r=l.selection)},[r,a,i,o,s]}class Me extends D{constructor(t){super(),R(this,t,St,Et,H,{label:1,options:2,selection:0})}}function Ct(e){let t,n,a,i,r,o,s,l;return{c(){t=b("label"),n=b("div"),a=b("span"),i=z(e[1]),r=S(),o=b("input"),g(a,"class","label-text"),g(n,"class","label"),g(o,"type","password"),g(o,"placeholder",e[0]),g(o,"class","input input-bordered"),g(t,"class","form-control w-full max-w-xs")},m(c,f){N(c,t,f),h(t,n),h(n,a),h(a,i),h(t,r),h(t,o),$e(o,e[0]),s||(l=[A(o,"input",e[3]),A(o,"change",e[2])],s=!0)},p(c,[f]){f&2&&V(i,c[1]),f&1&&g(o,"placeholder",c[0]),f&1&&o.value!==c[0]&&$e(o,c[0])},i:E,o:E,d(c){c&&C(t),s=!1,P(l)}}}function Mt(e,t,n){let{label:a=""}=t,{value:i=""}=t;function r(s){Re.call(this,e,s)}function o(){i=this.value,n(0,i)}return e.$$set=s=>{"label"in s&&n(1,a=s.label),"value"in s&&n(0,i=s.value)},[i,a,r,o]}class Nt extends D{constructor(t){super(),R(this,t,Mt,Ct,H,{label:1,value:0})}}function At(e){const t=e-1;return t*t*t+1}function Ne(e,{delay:t=0,duration:n=400,easing:a=me}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:a,css:r=>`opacity: ${r*i}`}}function Ve(e,{delay:t=0,duration:n=400,easing:a=At,axis:i="y"}={}){const r=getComputedStyle(e),o=+r.opacity,s=i==="y"?"height":"width",l=parseFloat(r[s]),c=i==="y"?["top","bottom"]:["left","right"],f=c.map(p=>`${p[0].toUpperCase()}${p.slice(1)}`),v=parseFloat(r[`padding${f[0]}`]),w=parseFloat(r[`padding${f[1]}`]),u=parseFloat(r[`margin${f[0]}`]),_=parseFloat(r[`margin${f[1]}`]),m=parseFloat(r[`border${f[0]}Width`]),d=parseFloat(r[`border${f[1]}Width`]);return{delay:t,duration:n,easing:a,css:p=>`overflow: hidden;opacity: ${Math.min(p*20,1)*o};${s}: ${p*l}px;padding-${c[0]}: ${p*v}px;padding-${c[1]}: ${p*w}px;margin-${c[0]}: ${p*u}px;margin-${c[1]}: ${p*_}px;border-${c[0]}-width: ${p*m}px;border-${c[1]}-width: ${p*d}px;`}}function Ae(e){let t,n,a,i,r,o,s;return{c(){t=b("div"),n=b("div"),a=b("span"),i=z(e[0]),g(n,"class",r="alert text-wrap "+(e[2]?"alert-info":"alert-error")),g(t,"class","toast toast-end")},m(l,c){N(l,t,c),h(t,n),h(n,a),h(a,i),s=!0},p(l,c){(!s||c&1)&&V(i,l[0]),(!s||c&4&&r!==(r="alert text-wrap "+(l[2]?"alert-info":"alert-error")))&&g(n,"class",r)},i(l){s||(K(()=>{s&&(o||(o=xe(t,Ne,{},!0)),o.run(1))}),s=!0)},o(l){o||(o=xe(t,Ne,{},!1)),o.run(0),s=!1},d(l){l&&C(t),l&&o&&o.end()}}}function Tt(e){let t,n,a=e[1]&&Ae(e);return{c(){a&&a.c(),t=at()},m(i,r){a&&a.m(i,r),N(i,t,r),n=!0},p(i,[r]){i[1]?a?(a.p(i,r),r&2&&M(a,1)):(a=Ae(i),a.c(),M(a,1),a.m(t.parentNode,t)):a&&(qe(),T(a,1,1,()=>{a=null}),Ge())},i(i){n||(M(a),n=!0)},o(i){T(a),n=!1},d(i){a&&a.d(i),i&&C(t)}}}const Te=40;function Pt(e,t,n){let a="",i=!1,r=!0;function o(s,l){n(0,a=s.length>Te?s.slice(0,Te)+"...":s),n(1,i=!0),n(2,r=l),setTimeout(()=>{n(1,i=!1)},3e3)}return[a,i,r,o]}class It extends D{constructor(t){super(),R(this,t,Pt,Tt,H,{setMessage:3})}get setMessage(){return this.$$.ctx[3]}}function te(e={model:"gpt-4o-mini",temperature:0},t=[]){return n=>{const a={role:"user",content:n},i=[...t,a];return jt(i,e).then(r=>{const o=Ot(r);return t.push(a),t.push(o.message),o})}}function ne(e){return e.message}function Ot(e){const{error:t,object:n,created:a,model:i,usage:r,system_fingerprint:o}=e;if(t)throw t.message;const s=e.choices[0];if(s.finish_reason==="stop")return{object:n,created:a,model:i,usage:r,system_fingerprint:o,message:s.message};throw new Error("No response from AI")}function jt(e,t){let{apiKey:n,...a}=t;try{n||(n={}.OPENAI_API_KEY)}catch{}return fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({...a,messages:e})}).then(i=>i.json())}async function Kt({text:e,color:t}){const n=await Ye();n&&(chrome.action.setBadgeBackgroundColor({color:t}),chrome.action.setBadgeText({tabId:n,text:e}))}async function Lt(){const[e]=await chrome.tabs.query({active:!0,currentWindow:!0});return e}async function Ye(){return(await Lt()).id}async function Pe(e){const t=await Ye();if(t)return new Promise((n,a)=>{chrome.tabs.sendMessage(t,e,function(i){n(i)})})}function fe(e){return new Promise((t,n)=>{chrome.storage.local.get(e,async a=>{const i=a[e];t(i)})})}async function Bt(e,t,n){return(await(await te({model:t,apiKey:e}))(`
        Fix the typos, punctuation and lettercase of this text. Keep the same language. 
        Do not add any text that is not there. 
        If the sentence is already correct, just leave it.
        If the sentence cannot be fixed, just leave it as it is.
        Here the text:${n}`).then(ne)).content}async function zt(e,t,n){return(await(await te({model:t,apiKey:e}))(`
        Elaborate on the following text with more details. Provide more background or information. 
        Expand on the ideas, but keep the length of the final text similar in length to the input of the text below.
        Keep the same language.
        Here the text:${n}`).then(ne)).content}async function Ft(e,t,n){return(await(await te({model:t,apiKey:e}))(`
        Paraphrase this text. Rewrite it with different words but keep the same length. 
        Keep the same language.
        Here the text:${n}`).then(ne)).content}async function Ht(e,t,n){return(await(await te({model:t,apiKey:e}))(`
        Summarize the following text. Keep the same language.
        Here the text:${n}`).then(ne)).content}async function Rt(e,t,n,a){return(await(await te({model:t,apiKey:e}))(`
      Translate the text in the ${a} language.
      Do not modify the text, its meaning or its tone.
      Here the text:${n}`).then(ne)).content}const Dt=["Abkhaz","Afar","Afrikaans","Akan","Albanian","Amharic","Arabic","Aragonese","Armenian","Assamese","Avaric","Avestan","Aymara","Azerbaijani","Bambara","Bashkir","Basque","Belarusian","Bengali","Bihari","Bislama","Bosnian","Breton","Bulgarian","Burmese","Catalan","Chamorro","Chechen","Chichewa","Chinese","Chuvash","Cornish","Corsican","Cree","Croatian","Czech","Danish","Divehi","Dutch","Dzongkha","English","Esperanto","Estonian","Ewe","Faroese","Fijian","Finnish","French","Fulah","Galician","Georgian","German","Greek","Guarani","Gujarati","Haitian","Hausa","Hebrew","Herero","Hindi","Hiri Motu","Hungarian","Interlingua","Indonesian","Interlingue","Irish","Igbo","Inupiaq","Ido","Icelandic","Italian","Inuktitut","Japanese","Javanese","Kalaallisut","Kannada","Kanuri","Kashmiri","Kazakh","Khmer","Kikuyu","Kinyarwanda","Kirghiz","Komi","Kongo","Korean","Kurdish","Kwanyama","Latin","Luxembourgish","Ganda","Limburgish","Lingala","Lao","Lithuanian","Luba-Katanga","Latvian","Manx","Macedonian","Malagasy","Malay","Malayalam","Maltese","Maori","Marathi","Marshallese","Mongolian","Nauru","Navajo","Norwegian Bokmål","North Ndebele","Nepali","Ndonga","Norwegian Nynorsk","Norwegian","Nuosu","South Ndebele","Occitan","Ojibwa","Old Church Slavonic","Oromo","Oriya","Ossetian","Panjabi","Pāli","Persian","Polish","Pashto","Portuguese","Quechua","Romansh","Kirundi","Romanian","Russian","Sanskrit","Sardinian","Sindhi","Northern Sami","Samoan","Sango","Serbian","Gaelic","Shona","Sinhala","Slovak","Slovenian","Somali","Southern Sotho","Spanish","Sundanese","Swahili","Swati","Swedish","Tamil","Telugu","Tajik","Thai","Tigrinya","Tibetan","Turkmen","Tagalog","Tswana","Tonga","Turkish","Tsonga","Tatar","Twi","Tahitian","Uyghur","Ukrainian","Urdu","Uzbek","Venda","Vietnamese","Volapük","Walloon","Wolof","Xhosa","Yiddish","Yoruba","Zhuang","Zulu"];function Ut(e){let t,n,a,i,r,o,s,l,c,f,v,w,u,_,m,d;function p(k){e[10](k)}let x={label:"Pick a language",options:Dt};e[1]!==void 0&&(x.selection=e[1]),i=new Me({props:x}),W.push(()=>ue(i,"selection",p)),i.$on("change",e[8]);function y(k){e[11](k)}let $={label:"Pick a model",options:["gpt-4o-mini","gpt-4o"]};e[2]!==void 0&&($.selection=e[2]),l=new Me({props:$}),W.push(()=>ue(l,"selection",y)),l.$on("change",e[7]);function I(k){e[12](k)}let Y={label:"Input your API key"};return e[3]!==void 0&&(Y.value=e[3]),u=new Nt({props:Y}),W.push(()=>ue(u,"value",I)),u.$on("change",e[9]),{c(){t=b("div"),n=b("div"),a=b("div"),F(i.$$.fragment),o=S(),s=b("div"),F(l.$$.fragment),f=S(),v=b("div"),v.textContent="Settings",w=S(),F(u.$$.fragment),g(a,"class","grid"),g(s,"class","grid mt-4"),g(v,"class","divider"),g(n,"class","w-64 h-96"),g(t,"class","flex justify-center")},m(k,O){N(k,t,O),h(t,n),h(n,a),L(i,a,null),h(n,o),h(n,s),L(l,s,null),h(n,f),h(n,v),h(n,w),L(u,n,null),d=!0},p(k,O){e=k;const be={};!r&&O&2&&(r=!0,be.selection=e[1],le(()=>r=!1)),i.$set(be);const ve={};!c&&O&4&&(c=!0,ve.selection=e[2],le(()=>c=!1)),l.$set(ve);const we={};!_&&O&8&&(_=!0,we.value=e[3],le(()=>_=!1)),u.$set(we)},i(k){d||(M(i.$$.fragment,k),M(l.$$.fragment,k),M(u.$$.fragment,k),m||K(()=>{m=Je(t,Ve,{axis:"x",duration:Ze}),m.start()}),d=!0)},o(k){T(i.$$.fragment,k),T(l.$$.fragment,k),T(u.$$.fragment,k),d=!1},d(k){k&&C(t),B(i),B(l),B(u)}}}function qt(e){let t,n,a,i;return n=new _t({props:{language:e[1]}}),n.$on("grammar",e[6]("fix_grammar")),n.$on("elaborate",e[6]("elaborate")),n.$on("rewrite",e[6]("rewrite")),n.$on("summarize",e[6]("summarize")),n.$on("translate",e[6]("translate")),{c(){t=b("div"),F(n.$$.fragment),g(t,"class","flex items-center justify-center")},m(r,o){N(r,t,o),L(n,t,null),i=!0},p(r,o){e=r;const s={};o&2&&(s.language=e[1]),n.$set(s)},i(r){i||(M(n.$$.fragment,r),a||K(()=>{a=Je(t,Ve,{axis:"x",duration:Ze}),a.start()}),i=!0)},o(r){T(n.$$.fragment,r),i=!1},d(r){r&&C(t),B(n)}}}function Gt(e){let t,n,a,i,r,o,s,l,c,f,v;a=new yt({props:{processing:e[5]}});const w=[qt,Ut],u=[];function _(d,p){return d[0]?0:1}r=_(e),o=u[r]=w[r](e),l=new xt({}),l.$on("home",e[13]),l.$on("options",e[14]);let m={};return f=new It({props:m}),e[15](f),{c(){t=b("div"),n=b("div"),F(a.$$.fragment),i=S(),o.c(),s=S(),F(l.$$.fragment),c=S(),F(f.$$.fragment),g(n,"class","mb-6"),g(t,"class","bg-base-100 ml-4 mr-4 w-80 h-96")},m(d,p){N(d,t,p),h(t,n),L(a,n,null),h(t,i),u[r].m(t,null),h(t,s),L(l,t,null),N(d,c,p),L(f,d,p),v=!0},p(d,[p]){const x={};p&32&&(x.processing=d[5]),a.$set(x);let y=r;r=_(d),r===y?u[r].p(d,p):(qe(),T(u[y],1,1,()=>{u[y]=null}),Ge(),o=u[r],o?o.p(d,p):(o=u[r]=w[r](d),o.c()),M(o,1),o.m(t,s));const $={};f.$set($)},i(d){v||(M(a.$$.fragment,d),M(o),M(l.$$.fragment,d),M(f.$$.fragment,d),v=!0)},o(d){T(a.$$.fragment,d),T(o),T(l.$$.fragment,d),T(f.$$.fragment,d),v=!1},d(d){d&&C(t),B(a),u[r].d(),B(l),d&&C(c),e[15](null),B(f,d)}}}const Ze=400;function Wt(e,t,n){let a=!0,i="English",r="gpt-4o-mini",o="sk-proj-TrU-RWW...",s,l=!1;ct(async()=>{n(3,o=await fe("natto_apikey")??o),n(2,r=await fe("natto_model")??r),n(1,i=await fe("natto_translation_language")??i),Kt({text:"✅",color:"black"})});function c(y){return async function(){let{text:$}=await Pe({action:"get_selected_text"});try{if(y=="fix_grammar")n(5,l=!0),$=await Bt(o,r,$);else if(y=="elaborate")n(5,l=!0),$=await zt(o,r,$);else if(y=="rewrite")n(5,l=!0),$=await Ft(o,r,$);else if(y=="summarize")n(5,l=!0),$=await Ht(o,r,$);else if(y=="translate")n(5,l=!0),$=await Rt(o,r,$,i);else throw new Error("Unable to perform this action")}catch(I){s.setMessage(I.substring(0,40)+"...",!1);return}await Pe({action:"replace_selected_text",text:$}),s.setMessage("Done",!0),n(5,l=!1)}}async function f(y){await chrome.storage.local.set({natto_model:r})}async function v(y){await chrome.storage.local.set({natto_translation_language:i})}async function w(y){await chrome.storage.local.set({natto_apikey:o}),s.setMessage("Updated",!0)}function u(y){i=y,n(1,i)}function _(y){r=y,n(2,r)}function m(y){o=y,n(3,o)}const d=()=>n(0,a=!0),p=()=>n(0,a=!1);function x(y){W[y?"unshift":"push"](()=>{s=y,n(4,s)})}return[a,i,r,o,s,l,c,f,v,w,u,_,m,d,p,x]}class Jt extends D{constructor(t){super(),R(this,t,Wt,Gt,H,{})}}new Jt({target:document.getElementById("app")});
